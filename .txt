INSERT INTO products (id, name, price, family_id, format, dots, last_changed, active) VALUES
    (1, 'BISTEC DE RES',            10.99, 1, 'kg', 10, '2024-01-08 12:00:00', 1),
    (2, 'BISTEC MAGRO',             12.99, 1, 'kg', 10, '2024-01-08 13:30:00', 1),
    (3, 'COCIDO PURA',              13.99, 1, 'kg', 10, '2024-01-08 13:30:00', 1),
    (4, 'COCIDO SURTIDO',           14.99, 1, 'kg', 10, '2024-01-08 13:30:00', 1),
    (5, 'MOLIDA ESPECIAL',          15.99, 1, 'kg', 10, '2024-01-08 13:30:00', 1),
    (6, 'MOLIDA MIXTA',             16.99, 1, 'kg', 10, '2024-01-08 13:30:00', 1),
    (7, 'DESHEBRAR DE RES',         17.99, 1, 'kg', 10, '2024-01-08 13:30:00', 1),

    (8, 'ARRACHERA / MARINADA',     18.99, 2, 'kg', 10, '2024-01-08 13:30:00', 1),
    (9, 'BIRRIA',                   19.99, 2, 'kg', 10, '2024-01-08 13:30:00', 1),

    (10, 'BANDERA',                 20.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),
    (12, 'MENUDO CARNE',            21.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),
    (12, 'MENUDO SURTIDO',          22.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),
    (13, 'DIEZMILLO',               23.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),
    (14, 'CHAMBARETE',              24.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),
    (15, 'HIGADO',                  25.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),
    (16, 'HAMBURGUESA RES',         26.99, 3, 'kg', 10, '2024-01-08 13:30:00', 1),

    (17, 'AGUJA NORTENA',           15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (18, 'BABILLA',                 15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (19, 'CABEZA',                  15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (20, 'CANOA',                   15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (21, 'COLA DE RES',             15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (21, 'PESCUEZO',                15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (22, 'FILETE',                  15.99, 4, 'kg', 10, '2024-01-08 13:30:00', 1),
    (23, 'HUESO',                   10.99, 4, 'kg', 10, '2024-01-08 12:00:00', 1),

    (24, 'LABIO',                   15.99, 5, 'kg', 10, '2024-01-08 13:30:00', 1),
    (25, 'LENGUA',                  15.99, 5, 'kg', 10, '2024-01-08 13:30:00', 1),
    (26, 'MEDULA',                  15.99, 5, 'kg', 10, '2024-01-08 13:30:00', 1),

    (27, 'NUEZ',                    15.99, 6, 'kg', 10, '2024-01-08 13:30:00', 1),
    (28, 'PATA',                    15.99, 6, 'kg', 10, '2024-01-08 13:30:00', 1),
    (29, 'PLATANO',                 15.99, 6, 'kg', 10, '2024-01-08 13:30:00', 1),
    (30, 'SESOS',                   15.99, 6, 'kg', 10, '2024-01-08 13:30:00', 1),
    (31, 'SOLOMILLO',               15.99, 6, 'kg', 10, '2024-01-08 13:30:00', 1),
    (32, 'SUADERO',                 15.99, 6, 'kg', 10, '2024-01-08 13:30:00', 1),

    (33, 'BOLA DE  RES',            15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (34, 'BRAZO DE FILETE',         15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (35, 'CENTRO DE PALOMA',        15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (36, 'CUETE',                   15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (37, 'ESPALDA',                 15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (38, 'TAPA DE PALOMA',          15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (39, 'PESCADITO',               15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (40, 'TOCINILLA',               15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),
    (41, 'PALOMA',                  15.99, 7, 'kg', 10, '2024-01-08 13:30:00', 1),

    (42, 'TOMA HAWK',               15.99, 8, 'kg', 10, '2024-01-08 13:30:00', 1),
    (43, 'TOP SIRLOIN',             15.99, 8, 'kg', 10, '2024-01-08 13:30:00', 1),

    (44, 'CABRERIA',                15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),
    (45, 'NEW YORK',                15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),
    (46, 'PEINECILLO',              15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),
    (47, 'PICANA',                  15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),
    (48, 'RIB EYE',                 15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),
    (49, 'SIRLOIN',                 15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),
    (50, 'T-BONE',                  15.99, 9, 'kg', 10, '2024-01-08 13:30:00', 1),

---------------------------------------------------------------------------------------

    (51, 'PIERNA CON HUESO',        15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),
    (52, 'PIERNA SIN HUESO',        15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),
    (53, 'ESPALDA CON HUESO',       15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),
    (54, 'ESPALDA SIN HUESO',       15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),
    (55, 'COSTILLA DE CERDO',       15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),
    (56, 'ESPINAZO',                15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),
    (57, 'LOMO DE CERDO',           15.99, 10, 'kg', 10, '2024-01-08 13:30:00', 1),

    (58, 'CHORIZO',                 15.99, 11, 'kg', 10, '2024-01-08 13:30:00', 1),
    (59, 'LONGANIZA',               15.99, 11, 'kg', 10, '2024-01-08 13:30:00', 1),

    (60, 'CHULETA AHUMADA',         15.99, 12, 'kg', 10, '2024-01-08 13:30:00', 1),
    (61, 'LENGUA DE CERDO',         15.99, 12, 'kg', 10, '2024-01-08 13:30:00', 1),
    (62, 'ADOBADA',                 15.99, 12, 'kg', 10, '2024-01-08 13:30:00', 1),
    (63, 'FREIR',                   15.99, 12, 'kg', 10, '2024-01-08 13:30:00', 1),
    (64, 'CABEZA DE CERDO',         15.99, 12, 'kg', 10, '2024-01-08 13:30:00', 1),
    (65, 'MANITAS',                 15.99, 12, 'kg', 10, '2024-01-08 13:30:00', 1),

    (66, 'ALDILLA',                 15.99, 13, 'kg', 10, '2024-01-08 13:30:00', 1),
    (67, 'ALETA',                   15.99, 13, 'kg', 10, '2024-01-08 13:30:00', 1),
    (68, 'TOCINO',                  15.99, 13, 'kg', 10, '2024-01-08 13:30:00', 1),
    (68, 'CABEZA DE LOMO',          15.99, 13, 'kg', 10, '2024-01-08 13:30:00', 1),
    (69, 'ESPINAZO CABEZA',         15.99, 13, 'kg', 10, '2024-01-08 13:30:00', 1),
    (70, 'MOLIDA DE CERDO',         15.99, 13, 'kg', 10, '2024-01-08 13:30:00', 1),

    (71, 'HUESO',                   15.99, 14, 'kg', 10, '2024-01-08 13:30:00', 1),
    (72, 'BUCHE',                   15.99, 14, 'kg', 10, '2024-01-08 13:30:00', 1),

    (73, 'CHULETA NATURAL',         15.99, 15, 'kg', 10, '2024-01-08 13:30:00', 1),
    (74, 'BISTECK',                 15.99, 15, 'kg', 10, '2024-01-08 13:30:00', 1),
    (75, 'CHAMORRO',                15.99, 15, 'kg', 10, '2024-01-08 13:30:00', 1),
    (76, 'COSTILLA TIERNA/BBQ',     15.99, 15, 'kg', 10, '2024-01-08 13:30:00', 1),
    (77, 'MANTECA',                 15.99, 15, 'kg', 10, '2024-01-08 13:30:00', 1),

---------------------------------------------------------------------------------------

    (78, 'POLLO',                   15.99, 16, 'kg', 10, '2024-01-08 13:30:00', 1),
    (79, 'PECHUGA SIN ALA',         15.99, 16, 'kg', 10, '2024-01-08 13:30:00', 1),
    (80, 'PECHUGA CON ALA',         15.99, 16, 'kg', 10, '2024-01-08 13:30:00', 1),
    (81, 'PIERNA Y MUSLO',          15.99, 16, 'kg', 10, '2024-01-08 13:30:00', 1),
    (82, 'MILANESA',                15.99, 16, 'kg', 10, '2024-01-08 13:30:00', 1),

    (83, 'PULPA',                   15.99, 17, 'kg', 10, '2024-01-08 13:30:00', 1),
    (84, 'MUSLOS',                  15.99, 17, 'kg', 10, '2024-01-08 13:30:00', 1),
    (85, 'PIERNA',                  15.99, 17, 'kg', 10, '2024-01-08 13:30:00', 1),
    (86, 'MENUDENCIAS',             15.99, 17, 'kg', 10, '2024-01-08 13:30:00', 1),
    (87, 'ALITAS NATURALES',        15.99, 17, 'kg', 10, '2024-01-08 13:30:00', 1),

---------------------------------------------------------------------------------------

    (88, 'FILETE TILAPIA',          15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1),
    (89, 'CAMARON',                 15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1),
    (90, 'BASA',                    15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1),
    (91, 'SALMON',                  15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1),
    (92, 'SURIMI',                  15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1),
    (93, 'MARLIN AHUMADO',          15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1),
    (94, 'MEDALLON DE ATUN',        15.99, 18, 'kg', 10, '2024-01-08 13:30:00', 1);




@router.get('/family/{family_id}')
async def get_family_filtered(family_id: int):
    try:

        query = f"SELECT * FROM products WHERE family_id = {family_id}"

        result = sqlite_client.execute_query(query)

        if result is None or len(result) == 0:
            raise HTTPException(status_code=404, detail="Producto no encontrado")

        return result
    except sqlite3.Error as e:
        raise HTTPException(status_code=500, detail=f"Error de base de datos: {str(e)}")


@router.get('/search/{product_name}')
async def search_product_filtered(product_name: str):
    try:
        # Conecta a la base de datos SQLite
        sqlite_client.connect()
        
        # Usamos parámetros seguros para evitar problemas de inyección SQL
        query = f"SELECT * FROM products WHERE name LIKE '%{product_name}%'"
        results = sqlite_client.execute_query(query)  # Usamos f'%{product_name}%' como valor seguro para la búsqueda

        if not results:
            raise HTTPException(status_code=404, detail="Producto no encontrado")
        
        for i in results:
            list.append()
            print(i)


        return list 
    except sqlite3.Error as e:
        raise HTTPException(status_code=500, detail=f"Error de base de datos: {str(e)}")
